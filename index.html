<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#111111" />
  <title>FitPlan Pro v2</title>
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <!--This is a quick test-->
  <!-- Minimal header -->
  <header class="header">
    <div class="headerLeft">
      <div class="appTitle">FitPlan Pro v2</div>
      <div class="sub" id="headerSub">—</div>
    </div>

    <div class="badges">
      <div class="badge" id="todayBadge">Today: —</div>
      <div class="badge" id="statusBadge">Status: —</div>
    </div>
  </header>

  <main class="container">
    <!-- =========================
           HOME (Control Panel)
           ========================= -->
    <section class="screen" id="screenHome">
      <section class="card" id="homePrimaryCard">
        <div class="homeStack">
          <div class="homeTodayBlock">
            <div class="homeTodayTitle" id="homeTodayTitle">Today's workout</div>
            <div class="muted" id="homeTodaySubtitle">—</div>
          </div>

          <button id="btnHomeLogWorkout" class="btn homePill homePillPrimary">Log workout</button>
          <button id="btnHomeLogRest" class="btn homePill homePillSecondary">Log rest (2 rest day(s) left)</button>
          <div class="muted small" id="homeHelper"></div>
        </div>
      </section>
    </section>

    <!-- =========================
           LOG (Execution Mode)
           ========================= -->
    <section class="screen" id="screenLog" style="display:none">
      <section class="card" id="logCard">
        <div class="rowBetween">
          <div>
            <h2 id="logTitle" style="margin-bottom:4px">—</h2>
            <div class="muted small" id="logSub">—</div>
          </div>
          <button id="btnLogBackHome" class="btn tiny secondary" type="button">Home</button>
        </div>

        <div id="exerciseList" class="exerciseList"></div>

        <div class="actions">
          <button id="btnMarkRest" class="btn secondary">Log Rest</button>
          <button id="btnFinishDay" class="btn primary">Finish Workout</button>
        </div>
      </section>

      <!-- Summary (end-of-workout, last-week comparison) -->
      <section class="card" id="summaryCard" style="display:none">
        <h2>Workout Summary</h2>
        <p class="muted" id="summaryHint">—</p>
        <div id="summaryTable" class="summaryTable"></div>
        <div class="actions">
          <button id="btnSummaryDone" class="btn primary">Return Home</button>
        </div>
      </section>
    </section>

    <!-- =========================
     STATS (Profile + Training)
     ========================= -->
    <section class="screen" id="screenStats" style="display:none">
      <section class="card">
        <h2>Stats</h2>

        <div class="grid2">
          <div>
            <div class="small muted">Age</div>
            <div id="statAge" class="statValue">—</div>
          </div>

          <div>
            <div class="small muted">Current Bodyweight</div>
            <div id="statBW" class="statValue">—</div>
          </div>

          <div>
            <div class="small muted">BMI</div>
            <div id="statBMI" class="statValue">—</div>
          </div>

          <div>
            <div class="small muted">Streak</div>
            <div id="statStreak" class="statValue">—</div>
          </div>
        </div>

        <div class="divider"></div>

        <h3>Strength (tap to edit)</h3>
        <div class="grid3">
          <div id="statBench" class="statBox">Bench: —</div>
          <div id="statSquat" class="statBox">Squat: —</div>
          <div id="statDeadlift" class="statBox">Deadlift: —</div>
        </div>

        <div class="divider"></div>

        <h3>Training Volume</h3>
        <div class="small" id="stat7dWorkouts">—</div>
        <div class="small" id="stat30dWorkouts">—</div>

        <div class="divider"></div>

        <h3>Nutrition</h3>
        <div class="small" id="statCal7">—</div>
        <div class="small" id="statCal14">—</div>
        <div class="small" id="statWChange14">—</div>
      </section>
    </section>
    <!-- =========================
           HISTORY
           ========================= -->
    <section class="screen" id="screenHistory" style="display:none">
      <section class="card">
        <div class="rowBetween">
          <h2 style="margin:0">History</h2>
          <button id="btnHistoryRefresh" class="btn tiny secondary" type="button">Refresh</button>
        </div>
        <div id="recentLogs" class="recent" style="margin-top:12px"></div>
        <div class="divider" style="margin:14px 0"></div>

        <h3 style="margin:0 0 10px">Trends</h3>

        <div class="grid2">
          <section class="card" style="padding:12px">
            <div class="rowBetween">
              <div>
                <div class="small muted">Bodyweight</div>
                <div style="font-weight:800" id="weightRangeLabel">—</div>
              </div>
              <button id="btnUsePlaceholder" class="btn tiny secondary" type="button">Use placeholder</button>
            </div>
            <div class="chartWrap">
              <canvas id="weightChart" width="600" height="220"></canvas>
            </div>
          </section>

          <section class="card" style="padding:12px">
            <div class="small muted">Calories</div>
            <div style="font-weight:800" id="calRangeLabel">—</div>
            <div class="chartWrap">
              <canvas id="calChart" width="600" height="220"></canvas>
            </div>
          </section>
        </div>
        <!-- Quick Track placeholders moved to History (collapsed) -->
        <div class="divider" style="margin:14px 0"></div>

        <div class="rowBetween">
          <h3 style="margin:0">Quick Track</h3>
          <button class="btn tiny" id="btnToggleQuickTrack" type="button">Expand</button>
        </div>

        <div id="quickTrackBody" class="quickTrackBody" style="display:none; margin-top:10px">
          <div class="grid2">
            <div class="field">
              <div class="fieldLabel">Bodyweight (lb)</div>
              <input class="input" id="bwInput" type="number" min="0" step="0.1" placeholder="—" />

              <div class="grid2" style="margin-top:10px">
                <div>
                  <div class="fieldLabel">Height (in)</div>
                  <input class="input" id="heightInput" type="number" min="0" step="0.5" placeholder="71.5" />
                </div>
                <div>
                  <div class="fieldLabel">BMI</div>
                  <div class="small muted" id="bmiLabel" style="margin-top:10px">BMI: —</div>
                </div>
              </div>

              <button class="btn secondary" id="btnSaveBW">Save</button>
            </div>

            <div class="field">
              <div class="fieldLabel">Calories</div>
              <input class="input" id="calInput" type="number" min="0" step="1" placeholder="—" />
              <div class="small muted">Saved by date</div>
              <button class="btn secondary" id="btnSaveCal">Save</button>
            </div>
          </div>


        </div>
      </section>
    </section>
  </main>

  <!-- Bottom Navigation -->
  <nav class="nav">
    <button class="navItem active" id="navHome" type="button">Home</button>
    <button class="navItem" id="navStats" type="button">Stats</button>
    <button class="navItem" id="navHistory" type="button">History</button>
  </nav>

  <footer class="footer">
    <span>Offline-ready. Stored locally in IndexedDB.</span>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script type="module" src="./app.js"></script>
</body>

</html>
