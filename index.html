<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#111111" />
  <title>FitPlan Pro v2</title>
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <!--This is a quick test-->
  <!-- Minimal header -->
  <header class="header">
    <div class="headerLeft">
      <div class="appTitle">FitPlan Pro v2</div>
      <div class="sub" id="headerSub">—</div>
    </div>

    <div class="badges">
      <div class="badge" id="todayBadge">Today: —</div>
      <div class="badge" id="statusBadge">Status: —</div>
    </div>
  </header>

  <main class="container">
    <!-- =========================
           HOME (Control Panel)
           ========================= -->
    <section class="screen" id="screenHome">
      <section class="card" id="homePrimaryCard">
        <div class="homeStack">
          <div class="homeTodayBlock">
            <div class="homeTodayTitle" id="homeTodayTitle">Today's workout</div>
            <div class="muted" id="homeTodaySubtitle">—</div>
          </div>

          <button id="btnHomeLogWorkout" class="btn homePill homePillPrimary">Log workout</button>
          <button id="btnHomeLogRest" class="btn homePill homePillSecondary">Log rest (2 rest day(s) left)</button>
          <div class="muted small" id="homeHelper"></div>
        </div>
      </section>
    </section>

    <!-- =========================
           LOG (Execution Mode)
           ========================= -->
    <section class="screen" id="screenLog" style="display:none">
      <section class="card" id="logCard">
        <div class="rowBetween">
          <div>
            <h2 id="logTitle" style="margin-bottom:4px">—</h2>
            <div class="muted small" id="logSub">—</div>
          </div>
          <button id="btnLogBackHome" class="btn tiny secondary" type="button">Home</button>
        </div>

        <div id="wizardCard" class="wizardCard">
          <div class="wizardExerciseName" id="wizardExerciseName">—</div>
          <div class="wizardSetProgress" id="wizardSetProgress">Set — of —</div>
          <div class="wizardTarget" id="wizardTargetReps">Target: — reps</div>
          <input class="input wizardWeightInput" id="wizardWeight" type="number" min="0" step="0.5" placeholder="Weight" />
          <div class="wizardActions">
            <button id="btnWizardBack" class="btn secondary" type="button">Back</button>
            <button id="btnWizardDone" class="btn primary" type="button">Done</button>
          </div>
        </div>

        <div id="exerciseList" class="exerciseList" style="display:none"></div>

        <div class="actions">
          <button id="btnMarkRest" class="btn secondary">Log Rest</button>
          <button id="btnFinishDay" class="btn primary" style="display:none">Finish Workout</button>
        </div>
      </section>

      <!-- Summary (end-of-workout, last-week comparison) -->
      <section class="card" id="summaryCard" style="display:none">
        <h2>Workout Summary</h2>
        <p class="muted" id="summaryHint">—</p>
        <div id="summaryTable" class="summaryTable"></div>
        <div class="actions">
          <button id="btnSummaryDone" class="btn primary">Return Home</button>
        </div>
      </section>

      <div id="restTimerOverlay" class="restOverlay" style="display:none">
        <div class="restOverlayCard">
          <div class="restOverlayTitle" id="restTimerTitle">Rest</div>
          <div class="restOverlayCountdown" id="restTimerCountdown">00:00</div>
          <div class="restOverlayActions">
            <button id="btnRestStart" class="btn primary" type="button">Start</button>
            <button id="btnRestSkip" class="btn secondary" type="button">Skip</button>
          </div>
          <div class="restOverlayActions">
            <button id="btnRestMinus30" class="btn secondary" type="button">-30s</button>
            <button id="btnRestPlus30" class="btn secondary" type="button">+30s</button>
          </div>
        </div>
      </div>
    </section>

    <!-- =========================
     STATS (Profile + Training)
     ========================= -->
    <section class="screen" id="screenStats" style="display:none">
      <section class="card">
        <h2>Stats</h2>
        <div class="small muted" id="statProfileName">Saad Salman Beg</div>

        <div class="grid2">
          <div>
            <div class="small muted">Age</div>
            <div id="statAge" class="statValue">—</div>
          </div>

          <div>
            <div class="small muted">Current Bodyweight</div>
            <div id="statBW" class="statValue">—</div>
          </div>

          <div>
            <div class="small muted">BMI</div>
            <div id="statBMI" class="statValue">—</div>
          </div>

          <div>
            <div class="small muted">Streak</div>
            <div id="statStreak" class="statValue">—</div>
          </div>
        </div>

        <div class="divider"></div>

        <h3>Strength percentile (est.)</h3>
        <div class="small muted" id="statStrengthCaption">Based on estimated 1RM and StrengthLog standards (approx).</div>
        <div class="grid2 statStrengthGrid">
          <button id="statStrengthBench" class="statStrengthCard" type="button">—</button>
          <button id="statStrengthSquat" class="statStrengthCard" type="button">—</button>
          <button id="statStrengthDeadlift" class="statStrengthCard" type="button">—</button>
          <button id="statStrengthOHP" class="statStrengthCard" type="button">—</button>
        </div>

        <div class="divider"></div>

        <h3>Training Volume</h3>
        <div class="small" id="stat7dWorkouts">—</div>
        <div class="small" id="stat30dWorkouts">—</div>
      </section>
    </section>
    <!-- =========================
           HISTORY
           ========================= -->
    <section class="screen" id="screenHistory" style="display:none">
      <section class="card">
        <h2 style="margin:0">Progress</h2>
      </section>

      <section class="card">
        <h2>Bodyweight Progress</h2>
        <canvas id="weightChart" width="600" height="260"></canvas>
      </section>

      <section class="card">
        <h2>Workout Calendar</h2>
        <div id="calendarContainer"></div>
      </section>

      <section id="dayDetailsCard" class="card hidden">
        <h2 id="dayDetailsTitle"></h2>
        <div id="dayDetailsContent"></div>
      </section>
    </section>

    <!-- =========================
           ABOUT
           ========================= -->
    <section id="screenAbout" class="screen hidden">
      <section class="card">
        <h2>About</h2>
        <div class="small muted">Saad Salman Beg</div>

        <h3>Why I built it</h3>
        <div class="small">
          I wanted a focused, low-friction way to stay consistent, track daily check-ins, and keep progress tools simple on mobile.
        </div>

        <h3>What the project is</h3>
        <div class="small">
          FitPlan Pro v2 is a single-page, offline-first personal fitness tracker built for fast daily use and long-term consistency.
        </div>

        <h3>Privacy & data</h3>
        <div class="small">
          Data is stored locally on-device in IndexedDB. You control export/import from the Data tab, and nothing is sent to external servers by default.
        </div>

        <h3>Tech</h3>
        <ul class="aboutList">
          <li>Single-page web app (HTML, CSS, JavaScript)</li>
          <li>IndexedDB for local persistence</li>
          <li>PWA setup with service worker + manifest</li>
        </ul>

        <h3>What I'm improving next</h3>
        <ul class="aboutList">
          <li>Plan editing workflow with safe guardrails</li>
          <li>Cleaner trend visuals and progress insights</li>
          <li>Polish for faster daily check-in flow</li>
        </ul>

        <div class="small muted aboutFooterLine">Version: v2</div>
        <div class="small muted">Built by: Saad Salman Beg</div>
      </section>
    </section>

    <!-- =========================
           DATA
           ========================= -->
    <section class="screen" id="screenData" style="display:none">
      <section class="card">
        <h2>Data</h2>

        <h3>Backup / Restore (JSON)</h3>
        <div class="actions">
          <button id="btnDownloadBackup" class="btn secondary" type="button">Download Backup (.json)</button>
          <button id="btnRestoreBackup" class="btn secondary" type="button">Restore Backup (.json)</button>
        </div>
        <input id="backupFileInput" type="file" accept=".json,application/json" style="display:none" />

        <div class="divider" style="margin:14px 0"></div>

        <h3>Export (CSV)</h3>
        <div class="actions">
          <button id="btnExportSessionsCsv" class="btn secondary" type="button">Export Sessions CSV</button>
          <button id="btnExportSetLogsCsv" class="btn secondary" type="button">Export SetLogs CSV</button>
          <button id="btnExportMetricsCsv" class="btn secondary" type="button">Export Metrics CSV</button>
          <button id="btnExportCsvAll" class="btn secondary" type="button">Export All CSV</button>
        </div>

        <div class="divider" style="margin:14px 0"></div>

        <h3>Template Import (CSV)</h3>
        <div class="actions">
          <button id="btnDownloadTemplateCsv" class="btn secondary" type="button">Download Template CSV</button>
          <button id="btnImportTemplateCsv" class="btn secondary" type="button">Import Template CSV</button>
        </div>
        <input id="templateFileInput" type="file" accept=".csv,text/csv" style="display:none" />
      </section>
    </section>
  </main>

  <div id="bwGateOverlay" class="restOverlay" style="display:none">
    <div class="restOverlayCard">
      <div class="restOverlayTitle">Daily Check-in</div>
      <div class="muted" style="margin-top:0">Enter today's bodyweight to continue.</div>
      <input id="bwGateInput" class="input" type="number" min="0" step="0.1" placeholder="Bodyweight (lb)" />
      <button id="btnBwGateSave" class="btn primary" type="button">Save & Continue</button>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="nav">
    <button class="navItem active" id="navHome" type="button">Home</button>
    <button class="navItem" id="navStats" type="button">Stats</button>
    <button class="navItem" id="navHistory" type="button">History</button>
    <button class="navItem" id="navAbout" type="button">About</button>
    <button class="navItem" id="navData" type="button">Data</button>
  </nav>

  <footer class="footer">
    <span>Offline-ready. Stored locally in IndexedDB.</span>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script type="module" src="./app.js"></script>
</body>

</html>
